(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{GeNc:function(n,e,l){"use strict";l.r(e);var t=l("8Y7J");class o{}var i=l("pMnS"),c=l("MKJQ"),a=l("sZkV"),r=l("mrSG"),u=l("10do"),s=l("HF2u"),d=l("5miV"),g=l("Tddt"),m=l("xehS");class h{constructor(n,e,l,t,o,i,c,a){this.navCtrl=n,this.storage=e,this.subscriptionAPI=l,this.modalCtrl=t,this.ionService=o,this.generalService=i,this.router=c,this.memberService=a}ngOnInit(){}ionViewWillEnter(){this.initData()}initData(){this.storage.get("planInfo").then(n=>{console.log(n),n&&(this.daysLeft=n.days_left,this.currentPlanName=n.name)}),this.storage.get("userInfo").then(n=>{this.userID=n.id,this.token=n.token})}goback(){this.navCtrl.back()}activateFreePlan(n){this.ionService.showSpecificLoading("Please wait. This might take a while ..."),this.subscriptionAPI.activatefreesubscription(1,this.userID,this.token).subscribe(e=>{1===e.RESPONSECODE?this.downgradeDomains(n).then(n=>{this.ionService.closeLoading(),n?this.generalService.updatePlanInfo(this.userID,this.token).then(n=>{console.log(n),n&&this.router.navigate(["subscription-welcome"],{queryParams:{isNewUser:!1,oldPlan:this.currentPlanName+" Plan",platform:"android",status:"downgrade"}})}):this.ionService.presentToast("Downgrading plan failed.")}).catch(n=>{this.ionService.closeLoading(),this.ionService.presentToast("Server API error while downgrading with domains.")}):(this.ionService.closeLoading(),this.ionService.presentToast(e.RESPONSE))},n=>{this.ionService.closeLoading(),this.ionService.presentToast("Server API Problem while activating free plan")})}deleteAccount(){this.memberService.deleteAccount()}checkExDomainList(){return r.a(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:u.a,componentProps:{selectedPlan:"Starter",currentPlan:this.currentPlanName,allowedCnt:1,reason:!0},swipeToClose:!0});return n.onDidDismiss().then(n=>{"success"===n.role&&(console.log(n.data),this.activateFreePlan(n.data))}),yield n.present()}))}downgradeDomains(n){return new Promise((e,l)=>{this.subscriptionAPI.downgradePlan(n.domains,this.userID,this.token,n.feedback).subscribe(n=>{1===n.RESPONSECODE?e(!0):(this.ionService.presentToast(n.RESPONSE),l(!1))},n=>{this.ionService.closeLoading(),this.ionService.presentToast("Somthing might be wrong"),l(!1)})})}}var p=l("xgBC"),b=l("iInd"),f=t["\u0275crt"]({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;font-size:17px}ion-header[_ngcontent-%COMP%]   ion-button.back[_ngcontent-%COMP%]{position:absolute;left:0}ion-content[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]{background-color:#dcdcdc;border-radius:5px}ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block;text-align:center}ion-content[_ngcontent-%COMP%]   ion-label.sorry[_ngcontent-%COMP%]{font-size:22px;margin:20px auto;font-weight:500}ion-content[_ngcontent-%COMP%]   ion-label.days-left[_ngcontent-%COMP%]{padding:10px 30px;font-size:16px}ion-content[_ngcontent-%COMP%]   ion-label.expire[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:25px;font-weight:700;font-size:14px}ion-content[_ngcontent-%COMP%]   ion-label.revert[_ngcontent-%COMP%]{display:block;text-align:center;padding:0 42px;color:#484545}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;justify-content:center;padding:40px 10%}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .each[_ngcontent-%COMP%]{width:42%;height:1.5px;background-color:#9b9898}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;padding:0 3%;color:#484849}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block;width:82%;height:53px;font-size:16px;margin:auto;--border-radius:30px;text-transform:none}ion-content[_ngcontent-%COMP%]   ion-button.to-free[_ngcontent-%COMP%]{margin-top:30px}ion-content[_ngcontent-%COMP%]   ion-button.delete-account[_ngcontent-%COMP%]{margin-bottom:30px}"]],data:{}});function C(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,12,"ion-header",[["class","small-header"]],null,null,null,c.fb,c.p)),t["\u0275did"](1,49152,null,0,a.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,10,"ion-toolbar",[["class","toolbar"]],null,null,null,c.Fb,c.P)),t["\u0275did"](3,49152,null,0,a.zb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](4,0,null,0,8,"ion-buttons",[],null,null,null,c.T,c.d)),t["\u0275did"](5,49152,null,0,a.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](6,0,null,0,2,"ion-title",[],null,null,null,c.Db,c.N)),t["\u0275did"](7,49152,null,0,a.xb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["Cancel Membership"])),(n()(),t["\u0275eld"](9,0,null,0,3,"ion-button",[["class","back"],["mode","ios"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.goback()&&t),t}),c.S,c.c)),t["\u0275did"](10,49152,null,0,a.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["\u0275eld"](11,0,null,0,1,"ion-icon",[["class","back"],["mode","ios"],["name","arrow-back"],["slot","icon-only"]],null,null,null,c.gb,c.q)),t["\u0275did"](12,49152,null,0,a.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"],name:[1,"name"]},null),(n()(),t["\u0275eld"](13,0,null,null,29,"ion-content",[["padding",""]],null,null,null,c.bb,c.l)),t["\u0275did"](14,49152,null,0,a.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](15,0,null,0,2,"ion-label",[["class","sorry"]],null,null,null,c.mb,c.w)),t["\u0275did"](16,49152,null,0,a.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["SORRY TO SEE YOU GO!"])),(n()(),t["\u0275eld"](18,0,null,0,6,"div",[["class","extra"]],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,null,null,5,"ion-label",[["class","days-left"]],null,null,null,c.mb,c.w)),t["\u0275did"](20,49152,null,0,a.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["You still have "])),(n()(),t["\u0275eld"](22,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](23,null,[""," days"])),(n()(),t["\u0275ted"](-1,0,[" left of your membership."])),(n()(),t["\u0275eld"](25,0,null,0,2,"ion-label",[["class","expire"]],null,null,null,c.mb,c.w)),t["\u0275did"](26,49152,null,0,a.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["ONCE MEMBERSHIP EXPIRES..."])),(n()(),t["\u0275eld"](28,0,null,0,2,"ion-label",[["class","revert"]],null,null,null,c.mb,c.w)),t["\u0275did"](29,49152,null,0,a.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["You can revert to the free service where you get to keep a single user and domain active."])),(n()(),t["\u0275eld"](31,0,null,0,2,"ion-button",[["class","red to-free"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.checkExDomainList()&&t),t}),c.S,c.c)),t["\u0275did"](32,49152,null,0,a.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Revert to free service "])),(n()(),t["\u0275eld"](34,0,null,0,5,"div",[["class","line"]],null,null,null,null,null)),(n()(),t["\u0275eld"](35,0,null,null,0,"div",[["class","each left"]],null,null,null,null,null)),(n()(),t["\u0275eld"](36,0,null,null,2,"ion-label",[],null,null,null,c.mb,c.w)),t["\u0275did"](37,49152,null,0,a.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["OR"])),(n()(),t["\u0275eld"](39,0,null,null,0,"div",[["class","each right"]],null,null,null,null,null)),(n()(),t["\u0275eld"](40,0,null,0,2,"ion-button",[["class","gray"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.deleteAccount()&&t),t}),c.S,c.c)),t["\u0275did"](41,49152,null,0,a.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Delete my account "]))],(function(n,e){n(e,10,0,"ios"),n(e,12,0,"ios","arrow-back")}),(function(n,e){n(e,23,0,e.component.daysLeft)}))}function P(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-cancel-membership",[],null,null,null,C,f)),t["\u0275did"](1,114688,null,0,h,[a.Gb,p.b,g.a,a.Fb,m.a,s.a,b.m,d.a],null,null)],(function(n,e){n(e,1,0)}),null)}var v=t["\u0275ccf"]("app-cancel-membership",h,P,{},{},[]),R=l("SVse"),O=l("s7LF");class S{}l.d(e,"CancelMembershipPageModuleNgFactory",(function(){return M}));var M=t["\u0275cmf"](o,[],(function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,v]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,R.m,R.l,[t.LOCALE_ID,[2,R.x]]),t["\u0275mpd"](4608,O.q,O.q,[]),t["\u0275mpd"](4608,a.c,a.c,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,a.Fb,a.Fb,[a.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,a.Jb,a.Jb,[a.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,R.b,R.b,[]),t["\u0275mpd"](1073742336,O.p,O.p,[]),t["\u0275mpd"](1073742336,O.f,O.f,[]),t["\u0275mpd"](1073742336,a.Bb,a.Bb,[]),t["\u0275mpd"](1073742336,b.q,b.q,[[2,b.v],[2,b.m]]),t["\u0275mpd"](1073742336,S,S,[]),t["\u0275mpd"](1073742336,o,o,[]),t["\u0275mpd"](1024,b.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);