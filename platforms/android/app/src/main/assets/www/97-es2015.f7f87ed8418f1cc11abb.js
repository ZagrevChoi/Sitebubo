(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{"58qO":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("UwyE"),s=n("8Y7J"),o=n("RH9n");let l=(()=>{class e{constructor(e,t){this.socket=e,this.notificationAPI=t}defineEventHandlers(e,t){this.socket.on(e,e=>{t(e)})}emitPageSpeed(e,t){this.socket.on("speed-scanning",e=>{t(e)}),this.socket.emit("request-speed-scanning",e)}emitSecurityScan(e,t){this.socket.on("security-scanning",e=>{t(e)}),this.socket.emit("request-security-scanning",e)}emitSeoScanning(e,t){this.socket.on("seo-scanning",e=>{t(e)}),this.socket.emit("request-seo-scanning",e)}watchScanStatus(e,t){console.log(e),this.socket.on("scan-status",n=>{console.log("===============================",n.status),n.status&&t(e.domain_name)}),this.socket.emit("request-scan-status",e)}watchChanges(e,t,n){this.socket.on(`/domain/${t}/monitor/${e}`,t=>{console.log(t),"realtime"===e&&(n.realtime.score=t.result)})}removeHandler(e){this.socket.removeAllListeners(e)}websiteScan(e){this.socket.emit("request-web-scanning",e)}defineDashboardEvents(e,t){console.log(t),this.socket.on(`/domain/${e}/monitor/uptime`,e=>{t.uptime.status=e.result}),this.socket.on(`/domain/${e}/monitor/security`,e=>{t.security.desc=e.result}),this.socket.on(`/domain/${e}/monitor/pagespeed`,e=>{t["site-speed"].speedindex=e.result}),this.socket.on(`/domain/${e}/monitor/seomonitor`,e=>{t["seo-score"].seoscore=e.result}),this.socket.on(`/domain/${e}/monitor/brokenlink`,e=>{t["broken-links"].count=e.result}),this.socket.on(`/domain/${e}/monitor/googleanalytics`,e=>{t.analytics.conversion=e.conversionrate,t.analytics.visitors=e.users}),this.socket.on(`/domain/${e}/monitor/domainexpire`,e=>{t["domain-expiry"].expiry=e.result})}removeAllDashboardHandlers(e){this.socket.removeAllListeners(`/domain/${e}/monitor/uptime`),this.socket.removeAllListeners(`/domain/${e}/monitor/security`),this.socket.removeAllListeners(`/domain/${e}/monitor/pagespeed`),this.socket.removeAllListeners(`/domain/${e}/monitor/seomonitor`),this.socket.removeAllListeners(`/domain/${e}/monitor/brokenlink`),this.socket.removeAllListeners(`/domain/${e}/monitor/googleanalytics`),this.socket.removeAllListeners(`/domain/${e}/monitor/domainexpire`)}}return e.ngInjectableDef=s["\u0275\u0275defineInjectable"]({factory:function(){return new e(s["\u0275\u0275inject"](o.a),s["\u0275\u0275inject"](i.a))},token:e,providedIn:"root"}),e})()},"7laV":function(e,t,n){"use strict";n.r(t);var i=n("8Y7J");class s{}var o=n("pMnS"),l=n("MKJQ"),a=n("sZkV"),r=n("LIUN"),c=n("SVse"),u=n("XNiG"),d=n("LRne"),h=n("AcVp"),m=n("u8hY"),p=n("RZ0V"),g=n("58qO"),f=n("l7GE"),b=n("ZUHj");class v{constructor(e){this.notifier=e}call(e,t){const n=new k(e),i=Object(b.a)(n,this.notifier);return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class k extends f.a{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,n,i,s){this.seenValue=!0,this.complete()}notifyComplete(){}}var w=n("bOdf"),C=n("D0XW"),S=n("7o/Q"),y=n("EY2u"),O=n("HDdC");let _=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Object(d.a)(this.value);case"E":return e=this.error,new O.a(t=>t.error(e));case"C":return Object(y.b)()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class M{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new P(e,this.delay,this.scheduler))}}class P extends S.a{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,i=e.scheduler,s=e.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(s);if(n.length>0){const t=Math.max(0,n[0].time-i.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(P.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new N(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(_.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(_.createComplete()),this.unsubscribe()}}class N{constructor(e,t){this.time=e,this.notification=t}}class R{constructor(e,t,n,i,s,o,l,a){this.storage=e,this.activatedRoute=t,this.router=n,this.tempService=i,this.admobservice=s,this.socketService=o,this.backgroundmode=l,this.intparse=a,this.percentage=0,this.progresShow=0,this.completed=!1,this.status={started:!1,process:!1,finished:!1},this.pushes=[],this.dataStream=new u.a,this.unsubscribeAll=new u.a,this.admobservice.removeBanner(),this.backgroundmode.enable(),this.initData()}ngOnInit(){var e;this.fnHandler=this.fnHandler.bind(this),this.dataStream.pipe((e=this.unsubscribeAll,t=>t.lift(new v(e))),Object(w.a)(e=>"Web Site Scanning"===e.monitor&&"Started"===e.status?Object(d.a)(e):Object(d.a)(e).pipe(Object(w.a)(e=>Object(d.a)(e).pipe(function(e,t=C.a){var n;const i=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new M(i,t))}(800)))))).subscribe(e=>{console.log(e),"Web Site Scanning"===e.monitor&&"Finished"===e.status?setTimeout(()=>{this.defineRoutering()},1500):"Web Site Scanning"===e.monitor&&"Started"===e.status?this.status.started=!0:(this.tempResult=e,this.status.process=!0,this.doTricksWithUI())})}doTricksWithUI(){let e;"addDomain"===this.action?e=.01724:"security-scan"===this.action?e=.071423:"speed-scan"===this.action?e=.07692:"seo-scan"===this.action&&(e=.041666),this.percentage=this.percentage+e,this.progresShow=this.intparse.transform(100*this.percentage),this.addNewMonitor()}ngOnDestroy(){this.socketService.removeHandler("web-scanning"),this.unsubscribeAll.next(),this.unsubscribeAll.complete()}initData(){this.storage.get("userInfo").then(e=>{e&&(this.userID=e.id,this.token=e.token,this.storage.get("planInfo").then(e=>{this.planID=e.id}),this.activatedRoute.queryParams.subscribe(e=>{if(e)if(this.action=e.action,"addDomain"===e.action){const t={user_id:this.userID,domain_name:e.domainName,domain_id:parseInt(e.domain_id,10)};this.title="Web Scan",this.domainName=e.domainName,this.startWebSocket(t,"full-scan")}else{const t={user_id:this.userID,domain_name:this.tempService.dashboardParams.domainName,domain_id:this.tempService.dashboardParams.domainID};this.domainName=this.tempService.dashboardParams.domainName,"seo-scan"===e.action?(this.title="SEO Scan",this.startWebSocket(t,"seo-scan")):"speed-scan"===e.action?(this.title="Speed Scan",this.startWebSocket(t,"speed-scan")):"security-scan"===e.action&&(this.title="Security Scan",this.startWebSocket(t,"security-scan"))}}))})}changelabelOfCurrentMonitor(){setTimeout(()=>{this.tempResult.status="in Progress"},1e3)}addNewMonitor(){let e=`<div class='special'><ion-label class="slide-in-bottom">${this.tempResult.status} ...`;e+="</ion-label>",e+=`<ion-label class="slide-in-bottom">${this.tempResult.result}<ion-label><svg  xmlns="http://www.w3.org/2000/svg" class="check" width="166" height="151" viewBox="0 0 166 150.9">`,e+='<path d="M0.3 96l62.4 54.1L165.6 0.3"/></svg></div>',this.results.nativeElement.insertAdjacentHTML("beforeend",e)}fnHandler(e){this.dataStream.next(e)}startWebSocket(e,t){"full-scan"===t?(this.socketService.defineEventHandlers("web-scanning",this.fnHandler),this.socketService.websiteScan(e)):"security-scan"===t?this.socketService.emitSecurityScan(e,this.fnHandler):"seo-scan"===t?this.socketService.emitSeoScanning(e,this.fnHandler):"speed-scan"===t&&this.socketService.emitPageSpeed(e,this.fnHandler)}defineRoutering(){let e;this.completed=!0,this.progresShow=100,this.percentage=1,"addDomain"===this.action?e="domain-list":"speed-scan"===this.action?e="tabs/speed":"security-scan"===this.action?e="tabs/security":"seo-scan"===this.action&&(e="tabs/seo"),1===this.planID?this.admobservice.showInterstitial().then(()=>{setTimeout(()=>{this.router.navigate([e],{replaceUrl:!0,queryParams:{reload:!0}})},2e3)}):setTimeout(()=>{this.router.navigate([e],{replaceUrl:!0,queryParams:{reload:!0}})},2e3)}}var x=n("xgBC"),I=n("iInd"),D=i["\u0275crt"]({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]{--padding-top:env(safe-area-inset-top);--padding-bottom:env(safe-area-inset-bottom);--background:transparent;width:100%;height:100%;background-size:100% 100%!important;background-image:url(background.3a7770a625da959a60c3.png);background-repeat:no-repeat}ion-content[_ngcontent-%COMP%]   ion-label.domain_name[_ngcontent-%COMP%]{display:block;text-align:center;align-items:center;width:100%;height:5%;color:#fff;justify-content:center;font-size:22px}ion-content[_ngcontent-%COMP%]   ion-label.progress-status[_ngcontent-%COMP%]{display:block;margin:auto;width:100%;height:calc(5% - 10px);font-size:20px;color:#fff;text-align:center;position:absolute;top:0}ion-content[_ngcontent-%COMP%]   ion-label.monitor-name[_ngcontent-%COMP%]{padding:5px;background-color:#f66967}ion-content[_ngcontent-%COMP%]   div.completed[_ngcontent-%COMP%]{width:100%;height:10%;display:flex;justify-content:center;align-items:center;color:#fff}ion-content[_ngcontent-%COMP%]   div.completed[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:55px}ion-content[_ngcontent-%COMP%]   div.completed[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:22px}ion-content[_ngcontent-%COMP%]   div.completed[_ngcontent-%COMP%]   ion-label.completed[_ngcontent-%COMP%]{padding-top:10px}ion-content[_ngcontent-%COMP%]   div.img[_ngcontent-%COMP%]{height:20%;display:flex;justify-content:center;align-items:center;align-content:center;margin:auto}ion-content[_ngcontent-%COMP%]   div.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:90%;width:auto}ion-content[_ngcontent-%COMP%]   div.results[_ngcontent-%COMP%]{height:46%;display:flex;flex-direction:column;justify-content:flex-end;overflow:scroll;padding-bottom:30px;touch-action:none}ion-content[_ngcontent-%COMP%]   div.results[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{overflow:visible}@-webkit-keyframes draw{from{stroke-linecap:round}to{stroke-linecap:round;stroke-dashoffset:0}}@keyframes draw{from{stroke-linecap:round}to{stroke-linecap:round;stroke-dashoffset:0}}ion-content[_ngcontent-%COMP%]   div.footer[_ngcontent-%COMP%]{height:11%;width:100%;display:flex;justify-content:space-around;align-items:center;color:#fff;text-align:center;font-size:18px;flex-direction:column}ion-content[_ngcontent-%COMP%]   div.status[_ngcontent-%COMP%]{margin-top:5%;height:6%;width:100%;display:flex;flex-direction:column;position:relative}ion-content[_ngcontent-%COMP%]   div.status[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{position:absolute;--progress-background:rgb(102, 255, 0);height:10px;bottom:0}"]],data:{}});function E(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"ion-label",[["class","title"]],null,null,null,l.mb,l.w)),i["\u0275did"](1,49152,null,0,a.N,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275eld"](2,0,null,0,1,"b",[],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[""," "])),(e()(),i["\u0275ted"](-1,0,["completed"]))],null,(function(e,t){e(t,3,0,t.component.title)}))}function j(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,4,"ion-label",[["class","title"]],null,null,null,l.mb,l.w)),i["\u0275did"](1,49152,null,0,a.N,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275eld"](2,0,null,0,1,"b",[],null,null,null,null,null)),(e()(),i["\u0275ted"](3,null,[""," "])),(e()(),i["\u0275ted"](-1,0,["in Progress"]))],null,(function(e,t){e(t,3,0,t.component.title)}))}function A(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"ion-label",[["class","monitor-name"]],null,null,null,l.mb,l.w)),i["\u0275did"](1,49152,null,0,a.N,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275ted"](2,0,[""," Scanning"]))],null,(function(e,t){var n=t.component;e(t,2,0,null==n.tempResult?null:n.tempResult.monitor)}))}function q(e){return i["\u0275vid"](0,[i["\u0275pid"](0,r.a,[]),i["\u0275qud"](671088640,1,{results:0}),(e()(),i["\u0275eld"](2,0,null,null,26,"ion-content",[],null,null,null,l.bb,l.l)),i["\u0275did"](3,49152,null,0,a.u,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275eld"](4,0,null,0,4,"div",[["class","completed"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,E)),i["\u0275did"](6,16384,null,0,c.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,j)),i["\u0275did"](8,16384,null,0,c.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](9,0,null,0,2,"ion-label",[["class","domain_name"]],null,null,null,l.mb,l.w)),i["\u0275did"](10,49152,null,0,a.N,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275ted"](11,0,["",""])),(e()(),i["\u0275eld"](12,0,null,0,1,"div",[["class","img"]],null,null,null,null,null)),(e()(),i["\u0275eld"](13,0,null,null,0,"img",[["alt",""],["src","assets/icons/loader.gif"]],null,null,null,null,null)),(e()(),i["\u0275eld"](14,0,null,0,6,"div",[["class","footer"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,A)),i["\u0275did"](16,16384,null,0,c.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](17,0,[["temp",1]],null,3,"div",[["class","process"],["mode","ios"]],null,null,null,null,null)),(e()(),i["\u0275eld"](18,0,null,null,2,"ion-label",[],null,null,null,l.mb,l.w)),i["\u0275did"](19,49152,null,0,a.N,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275ted"](20,0,[""," "])),(e()(),i["\u0275eld"](21,0,[[1,0],["results",1]],0,0,"div",[["class","results"]],null,null,null,null,null)),(e()(),i["\u0275eld"](22,0,null,0,6,"div",[["class","status"]],null,null,null,null,null)),(e()(),i["\u0275eld"](23,0,null,null,3,"ion-label",[["class","progress-status"]],null,null,null,l.mb,l.w)),i["\u0275did"](24,49152,null,0,a.N,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],null,null),(e()(),i["\u0275ted"](25,0,["","% Done"])),i["\u0275ppd"](26,1),(e()(),i["\u0275eld"](27,0,null,null,1,"ion-progress-bar",[["color","success"]],null,null,null,l.rb,l.B)),i["\u0275did"](28,49152,null,0,a.W,[i.ChangeDetectorRef,i.ElementRef,i.NgZone],{color:[0,"color"],value:[1,"value"]},null)],(function(e,t){var n=t.component;e(t,6,0,n.completed),e(t,8,0,!n.completed),e(t,16,0,null==n.tempResult?null:n.tempResult.monitor),e(t,28,0,"success",n.percentage)}),(function(e,t){var n=t.component;e(t,11,0,n.domainName),e(t,20,0,null==n.tempResult?null:n.tempResult.status);var s=i["\u0275unv"](t,25,0,e(t,26,0,i["\u0275nov"](t,0),n.progresShow));e(t,25,0,s)}))}function H(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"app-domain-scan",[],null,null,null,q,D)),i["\u0275prd"](512,null,r.a,r.a,[]),i["\u0275did"](2,245760,null,0,R,[x.b,I.a,I.m,m.a,p.a,g.a,h.a,r.a],null,null)],(function(e,t){e(t,2,0)}),null)}var L=i["\u0275ccf"]("app-domain-scan",R,H,{},{},[]),$=n("s7LF"),V=n("HlEa"),W=n("s5RH"),Z=n("B0QU"),F=n("LtGu"),T=n("5Bek"),U=n("zMNK"),z=n("c9fC"),B=n("7++P"),J=n("j1ZV");class Y{}n.d(t,"DomainScanPageModuleNgFactory",(function(){return K}));var K=i["\u0275cmf"](s,[],(function(e){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,L]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,c.m,c.l,[i.LOCALE_ID,[2,c.x]]),i["\u0275mpd"](4608,$.q,$.q,[]),i["\u0275mpd"](4608,a.c,a.c,[i.NgZone,i.ApplicationRef]),i["\u0275mpd"](4608,a.Fb,a.Fb,[a.c,i.ComponentFactoryResolver,i.Injector]),i["\u0275mpd"](4608,a.Jb,a.Jb,[a.c,i.ComponentFactoryResolver,i.Injector]),i["\u0275mpd"](4608,V.a,V.a,[i.LOCALE_ID,[2,"googleChartsVersion"],[2,"mapsApiKey"]]),i["\u0275mpd"](4608,W.a,W.a,[]),i["\u0275mpd"](1073742336,c.b,c.b,[]),i["\u0275mpd"](1073742336,$.p,$.p,[]),i["\u0275mpd"](1073742336,$.f,$.f,[]),i["\u0275mpd"](1073742336,a.Bb,a.Bb,[]),i["\u0275mpd"](1073742336,I.q,I.q,[[2,I.v],[2,I.m]]),i["\u0275mpd"](1073742336,Z.c,Z.c,[]),i["\u0275mpd"](1073742336,F.a,F.a,[]),i["\u0275mpd"](1073742336,T.c,T.c,[]),i["\u0275mpd"](1073742336,U.b,U.b,[]),i["\u0275mpd"](1073742336,z.d,z.d,[]),i["\u0275mpd"](1073742336,B.CountoModule,B.CountoModule,[]),i["\u0275mpd"](1073742336,J.a,J.a,[]),i["\u0275mpd"](1073742336,Y,Y,[]),i["\u0275mpd"](1073742336,s,s,[]),i["\u0275mpd"](256,"googleChartsVersion","46",[]),i["\u0275mpd"](256,"mapsApiKey","AIzaSyCHjrW83Zc1vwk4mzxztYbvk2by0PQZoIE",[]),i["\u0275mpd"](256,Z.b,{radius:70,outerStrokeWidth:10,innerStrokeWidth:5,showTitle:!1,showSubtitle:!1,showUnits:!1,showBackground:!1,startFromZero:!1},[]),i["\u0275mpd"](1024,I.k,(function(){return[[{path:"",component:R}]]}),[])])}))},LIUN:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{transform(e){return Math.round(e)}}}}]);