(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"5miV":function(n,e,t){"use strict";t.d(e,"a",(function(){return d}));var l=t("mrSG"),o=t("PXR4"),i=t("HF2u"),c=t("xehS"),r=t("XhpJ"),a=t("8Y7J"),s=t("sZkV"),u=t("xgBC");let d=(()=>{class n{constructor(n,e,t,l,o,i){this.actionCtrl=n,this.modalCtrl=e,this.generalService=t,this.ionService=l,this.userAPI=o,this.storage=i}deleteAccount(){return l.a(this,void 0,void 0,(function*(){const n=yield this.actionCtrl.create({header:"Are you sure to delete your account ?",buttons:[{text:"Yes",icon:"checkmark",handler:()=>{this.submitDeletion().then(n=>{n&&this.allDone()}).catch(n=>{})}},{text:"No",icon:"close",role:"cancel"}]});yield n.present()}))}submitDeletion(){return new Promise((n,e)=>{this.storage.get("userInfo").then(t=>{this.ionService.showLoading(),this.userAPI.deleteAccount(t.id,t.token).subscribe(t=>{this.ionService.closeLoading(),1===t.RESPONSECODE?n(!0):(this.ionService.presentToast(t.RESPONSE),e(!1))},n=>{this.ionService.presentToast("Account Deletion Failed due to the server"),e(!1)})})})}allDone(){return l.a(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:o.a});return n.onDidDismiss().then(()=>{this.generalService.logOut()}),yield n.present()}))}}return n.ngInjectableDef=a["\u0275\u0275defineInjectable"]({factory:function(){return new n(a["\u0275\u0275inject"](s.a),a["\u0275\u0275inject"](s.Fb),a["\u0275\u0275inject"](i.a),a["\u0275\u0275inject"](c.a),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](u.b))},token:n,providedIn:"root"}),n})()},GeNc:function(n,e,t){"use strict";t.r(e);var l=t("8Y7J");class o{}var i=t("pMnS"),c=t("MKJQ"),r=t("sZkV"),a=t("mrSG"),s=t("10do"),u=t("HF2u"),d=t("5miV"),g=t("Tddt"),h=t("xehS");class m{constructor(n,e,t,l,o,i,c,r){this.navCtrl=n,this.storage=e,this.subscriptionAPI=t,this.modalCtrl=l,this.ionService=o,this.generalService=i,this.router=c,this.memberService=r}ngOnInit(){}ionViewWillEnter(){this.initData()}initData(){this.storage.get("planInfo").then(n=>{console.log(n),n&&(this.daysLeft=n.days_left,this.currentPlanName=n.name)}),this.storage.get("userInfo").then(n=>{this.userID=n.id,this.token=n.token})}goback(){this.navCtrl.back()}activateFreePlan(n){this.ionService.showLoading(),this.subscriptionAPI.activatefreesubscription(1,this.userID,this.token).subscribe(e=>{console.log(e),1===e.RESPONSECODE?this.downgradeDomains(n).then(n=>{console.log(n),this.ionService.closeLoading(),n?this.generalService.updatePlanInfo(this.userID,this.token).then(n=>{console.log(n),n&&this.router.navigate(["view-membership"],{replaceUrl:!0})}):(this.ionService.closeLoading(),this.ionService.presentToast("Downgrading plan failed."))}).catch(n=>{this.ionService.closeLoading(),this.ionService.presentToast("Server API error while downgrading with domains.")}):(this.ionService.closeLoading(),this.ionService.presentToast(e.RESPONSE))},n=>{this.ionService.closeLoading(),this.ionService.presentToast("Server API Problem while activating free plan")})}deleteAccount(){this.memberService.deleteAccount()}checkExDomainList(){return a.a(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:s.a,componentProps:{selectedPlan:"Starter",currentPlan:this.currentPlanName,allowedCnt:1,reason:!0}});return n.onDidDismiss().then(n=>{"success"===n.role&&(console.log(n.data),this.activateFreePlan(n.data))}),yield n.present()}))}downgradeDomains(n){return new Promise((e,t)=>{this.ionService.showLoading(),this.subscriptionAPI.downgradePlan(n.domains,this.userID,this.token,n.feedback).subscribe(n=>{this.ionService.closeLoading(),console.log(n),1===n.RESPONSECODE?e(!0):(this.ionService.presentToast(n.RESPONSE),t(!1))},n=>{this.ionService.closeLoading(),this.ionService.presentToast("Somthing might be wrong"),t(!1)})})}}var p=t("xgBC"),b=t("iInd"),f=l["\u0275crt"]({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;font-size:17px}ion-header[_ngcontent-%COMP%]   ion-button.back[_ngcontent-%COMP%]{position:absolute;left:0}ion-content[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]{background-color:#dcdcdc;border-radius:5px}ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block;text-align:center}ion-content[_ngcontent-%COMP%]   ion-label.sorry[_ngcontent-%COMP%]{font-size:22px;margin-bottom:20px;font-weight:500}ion-content[_ngcontent-%COMP%]   ion-label.days-left[_ngcontent-%COMP%]{padding:10px 30px;font-size:16px}ion-content[_ngcontent-%COMP%]   ion-label.expire[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:25px;font-weight:700;font-size:14px}ion-content[_ngcontent-%COMP%]   ion-label.revert[_ngcontent-%COMP%]{display:block;text-align:center;padding:0 42px;color:#484545}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:-webkit-box;display:flex;align-content:center;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:40px 10%}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .each[_ngcontent-%COMP%]{width:42%;height:1.5px;background-color:#9b9898}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;padding:0 3%;color:#484849}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block;width:82%;height:53px;font-size:16px;margin:auto;--border-radius:30px;text-transform:none}ion-content[_ngcontent-%COMP%]   ion-button.to-free[_ngcontent-%COMP%]{margin-top:30px}ion-content[_ngcontent-%COMP%]   ion-button.delete-account[_ngcontent-%COMP%]{margin-bottom:30px}"]],data:{}});function v(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,12,"ion-header",[["class","small-header"]],null,null,null,c.fb,c.p)),l["\u0275did"](1,49152,null,0,r.B,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](2,0,null,0,10,"ion-toolbar",[["class","toolbar"]],null,null,null,c.Fb,c.P)),l["\u0275did"](3,49152,null,0,r.zb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](4,0,null,0,8,"ion-buttons",[],null,null,null,c.T,c.d)),l["\u0275did"](5,49152,null,0,r.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](6,0,null,0,2,"ion-title",[],null,null,null,c.Db,c.N)),l["\u0275did"](7,49152,null,0,r.xb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["Cancel Membership"])),(n()(),l["\u0275eld"](9,0,null,0,3,"ion-button",[["class","back"],["mode","ios"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.goback()&&l),l}),c.S,c.c)),l["\u0275did"](10,49152,null,0,r.k,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{mode:[0,"mode"]},null),(n()(),l["\u0275eld"](11,0,null,0,1,"ion-icon",[["class","back"],["mode","ios"],["name","arrow-back"],["slot","icon-only"]],null,null,null,c.gb,c.q)),l["\u0275did"](12,49152,null,0,r.C,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{mode:[0,"mode"],name:[1,"name"]},null),(n()(),l["\u0275eld"](13,0,null,null,29,"ion-content",[["padding",""]],null,null,null,c.bb,c.l)),l["\u0275did"](14,49152,null,0,r.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](15,0,null,0,2,"ion-label",[["class","sorry"]],null,null,null,c.mb,c.w)),l["\u0275did"](16,49152,null,0,r.N,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["SORRY TO SEE YOU GO!"])),(n()(),l["\u0275eld"](18,0,null,0,6,"div",[["class","extra"]],null,null,null,null,null)),(n()(),l["\u0275eld"](19,0,null,null,5,"ion-label",[["class","days-left"]],null,null,null,c.mb,c.w)),l["\u0275did"](20,49152,null,0,r.N,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["You still have "])),(n()(),l["\u0275eld"](22,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),l["\u0275ted"](23,null,[""," days"])),(n()(),l["\u0275ted"](-1,0,[" left of your membership."])),(n()(),l["\u0275eld"](25,0,null,0,2,"ion-label",[["class","expire"]],null,null,null,c.mb,c.w)),l["\u0275did"](26,49152,null,0,r.N,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["ONCE MEMBERSHIP EXPIRES..."])),(n()(),l["\u0275eld"](28,0,null,0,2,"ion-label",[["class","revert"]],null,null,null,c.mb,c.w)),l["\u0275did"](29,49152,null,0,r.N,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["You can revert to the free service where you get to keep a single user and domain active."])),(n()(),l["\u0275eld"](31,0,null,0,2,"ion-button",[["class","red to-free"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.checkExDomainList()&&l),l}),c.S,c.c)),l["\u0275did"](32,49152,null,0,r.k,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,[" Revert to free service "])),(n()(),l["\u0275eld"](34,0,null,0,5,"div",[["class","line"]],null,null,null,null,null)),(n()(),l["\u0275eld"](35,0,null,null,0,"div",[["class","each left"]],null,null,null,null,null)),(n()(),l["\u0275eld"](36,0,null,null,2,"ion-label",[],null,null,null,c.mb,c.w)),l["\u0275did"](37,49152,null,0,r.N,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["OR"])),(n()(),l["\u0275eld"](39,0,null,null,0,"div",[["class","each right"]],null,null,null,null,null)),(n()(),l["\u0275eld"](40,0,null,0,2,"ion-button",[["class","gray"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.deleteAccount()&&l),l}),c.S,c.c)),l["\u0275did"](41,49152,null,0,r.k,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,[" Delete my account "]))],(function(n,e){n(e,10,0,"ios"),n(e,12,0,"ios","arrow-back")}),(function(n,e){n(e,23,0,e.component.daysLeft)}))}function C(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-cancel-membership",[],null,null,null,v,f)),l["\u0275did"](1,114688,null,0,m,[r.Gb,p.b,g.a,r.Fb,h.a,u.a,b.m,d.a],null,null)],(function(n,e){n(e,1,0)}),null)}var P=l["\u0275ccf"]("app-cancel-membership",m,C,{},{},[]),S=t("SVse"),O=t("s7LF");class R{}t.d(e,"CancelMembershipPageModuleNgFactory",(function(){return k}));var k=l["\u0275cmf"](o,[],(function(n){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,P]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,S.m,S.l,[l.LOCALE_ID,[2,S.x]]),l["\u0275mpd"](4608,O.q,O.q,[]),l["\u0275mpd"](4608,r.c,r.c,[l.NgZone,l.ApplicationRef]),l["\u0275mpd"](4608,r.Fb,r.Fb,[r.c,l.ComponentFactoryResolver,l.Injector]),l["\u0275mpd"](4608,r.Jb,r.Jb,[r.c,l.ComponentFactoryResolver,l.Injector]),l["\u0275mpd"](1073742336,S.b,S.b,[]),l["\u0275mpd"](1073742336,O.p,O.p,[]),l["\u0275mpd"](1073742336,O.f,O.f,[]),l["\u0275mpd"](1073742336,r.Bb,r.Bb,[]),l["\u0275mpd"](1073742336,b.q,b.q,[[2,b.v],[2,b.m]]),l["\u0275mpd"](1073742336,R,R,[]),l["\u0275mpd"](1073742336,o,o,[]),l["\u0275mpd"](1024,b.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);